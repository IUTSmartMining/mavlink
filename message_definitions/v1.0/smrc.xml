<?xml version="1.0"?>
<mavlink>
  <!-- SMRC Autoware-APU message definitions                                     -->
  <!-- https://github.com/IUTSmartMining                               -->
  <enums>
    <enum name="CONTROL_MODE">
      <entry name="MANUAL" value="8"/>
      <entry name="AUTONOMOUS" value="255"/>
      <entry name="STREERING_AUTONOMOUS" value="12"/>
      <entry name="SPEED_AUTONOMOUS" value="123"/>
      <entry name="REMTO_CONTROL" value="127"/>
    </enum>
    <enum name="OAU_SWITCHES">
      <entry name="GENERATOR_FOREWARD" value="75"/>
      <entry name="GENERATOR_BACKWARD" value="71"/>
      <entry name="GENERATOR_NEUTRAL" value="67"/>
      <entry name="NONE_FORWARD" value="74"/>
      <entry name="NONE_BACKWARD" value="70"/>
      <entry name="NONE_NEUTRAL" value="66"/>
    </enum>
    <enum name="GEAR_STATUS">
      <entry name="GEAR_NEUTRAL" value="1"/>
      <entry name="GEAR_FORWARD" value="2"/>
      <entry name="GEAR_REVERSE" value="20"/>
    </enum>
    <enum name="HYDRAULIC_STATUS">
      <entry name="FREE" value="70"/>
      <entry name="ENGAGED" value="69"/>
      <entry name="MANUAL" value="77"/>
    </enum>
  </enums>
  <messages>
    <message id="11046" name="IPC_DATA">
      <description>Message Frame from Autoware to Autopilot(SMRC)</description>
      <!-- Preamble -->
      <field type="uint32_t" name="preamble">The preamble of payload.</field>
      <!-- Mode -->
      <field type="uint8_t" name="mode" enum="CONTROL_MODE">Indicates modes for Autopilot.</field>
      <!-- Refrences -->
      <field type="float[20]" name="references">Steering tire rotation rate ref.</field>
      <!-- <field type="float" name="sta_ref" units="deg" >Steering tire angle ref. (degrees)</field>
      <field type="float" name="str_ref" >Steering tire rotation rate ref.</field>
      <field type="float" name="yaw_ref">Yaw ref.</field>
      <field type="float" name="yaw_rate_ref" >Yaw rate ref.</field>
      <field type="float" name="swa" >Steering wheel angle.</field>
      <field type="float" name="swar">Steering wheel angle rate.</field>
      <field type="float" name="reserved0" >Reserved.</field>
      <field type="float" name="reserved1" >Reserved.</field>
      <field type="float" name="reserved2" >Reserved.</field>
      <field type="float" name="reserved3" >Reserved.</field>
      <field type="float" name="speed_ref" units="m/s">Speed ref. (meter/second)</field>
      <field type="float" name="acc_ref" units="m/s/s">Acceleration ref. (meter/Second^2)</field>
      <field type="float" name="jerk_ref" >Jerk ref. (meter/Second^3)</field>
      <field type="float" name="gpa_ref" >Gas pedal Angle ref.</field>
      <field type="float" name="ebrake_ref" >Electronic Brake pedal angle ref.</field>
      <field type="float" name="hbrake_ref">Hydraulic Brake pedal angle ref.</field>
      <field type="float" name="reserved4" >Reserved.</field>
      <field type="float" name="reserved5" >Reserved.</field>
      <field type="float" name="reserved6" >Reserved.</field>
      <field type="uint8_t" name="gear" >Gear.</field> -->
      <!-- Feedbacks -->
      <field type="uint8_t" name="mode_fb" enum="CONTROL_MODE">Indicates modes come from OAU.</field>
      <field type="uint8_t" name="switch_fb" enum="OAU_SWITCHES">Indicates switch status from OAU.</field>
      <field type="float" name="steer_fb">Steering angle from OAU.</field>
      <field type="float" name="acc_fb">Acceleration angle from OAU.</field>
      <field type="float" name="ebrake_fb">Electronic Brake angle from OAU.</field>
      <field type="uint8_t" name="hbrake_fb" enum="HYDRAULIC_STATUS">Hydraulic status from OAU.</field>
    </message>
  </messages>
</mavlink>


<!-- 
msg_params = {
 "preamble": 0,
 "mode": 255,
 {"sta_ref": 244,
 "str_ref": 244,
 "yaw_ref": 0,
 "yaw_rate_ref": 0,
 "swa": 0,
 "swar": 0,
 "reserved0": 0,
 "reserved1": 0,
 "reserved2": 0,
 "reserved3": 0,
 "speed_ref": 0,
 "acc_ref": 0,
 "jerk_ref": 0,
 "gpa_ref": 0,
 "ebrake_ref": 0,
 "hbrake_ref": 0,
 "reserved4": 0,
 "reserved5": 0,
 "reserved6": 0,
 "gear": 1}.values(),
 "mode_fb": 255,
 "switch_fb": 75,
 "steer_fb": 0,
 "acc_fb": 0,
 "ebrake_fb":0,
 "hbrake_fb": 'F'
 }

 -->


<!-- 
msg_params = {
 "preamble": 0,
 "mode": 127,
 "references": [i+100 for i in range(20)],
 "mode_fb": 127,
 "switch_fb": 75,
 "steer_fb": 45,
 "acc_fb": 47,
 "ebrake_fb":600,
 "hbrake_fb": FREE
 }

 -->